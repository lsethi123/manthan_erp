.row{"ng-controller" => "TermResultsController"} 
  .row
    .col-md-1
    .col-md-10
      %table{:class => "table"}
        %tr
          %th TERM         
          %th FROM DATE 
          %th TO DATE 
          - @academic_terms.each do |academic_term|
            %tr
              %td
                %a{href: "#", "ng-click" =>"selectTermResults(#{academic_term.id},'#{academic_term.term_name}')"}= academic_term.term_name     
              %td= academic_term.from_date                     
              %td= academic_term.to_date 
    .col-md-1
  .row
    .modal.fade{ :id => "mailSubjectModal", :tabindex => "-1", :role => "dialog", "aria-labelledby" => "myModalLabel", "aria-hidden" => "true"}
      .modal-dialog
        .modal-content
          .modal-header
            %button{ :class => "close", "data-dismiss" => "modal", "aria-hidden" => "true" } &times;
            %h4.modal-title{ :id => "myModalLabel"} MAIL TO ALL FACULTY MEMBERS
          .modal-body
            .row
              .col-md-10
                .col-md-2
                  = label_tag "SUBJECT", nil, :class => "form-label"
                .col-md-10
                  = text_field_tag "",nil, :class => "form-control", :ng_model => "myMailSubject", :disabled => "disabled"             
              .col-md-2
            .row
              .col-md-10
                .col-md-2
                  = label_tag "MESSAGE", nil, :class => "form-label"
                .col-md-10
                  = text_area_tag "",nil, :class => "form-control", :ng_model => "myMailMessage"
              .col-md-2{"ng-controller" => "MailingController"}
                %button{:type => "button", :class=> "btn btn-primary", :ng_click => "termResultsMail(myMailSubject,myMailMessage)"}=  "SEND"
  .row
    .modal.fade.bs-example-modal-lg{ :id => "termResultsModal", :tabindex => "-1", :role => "dialog", "aria-labelledby" => "myLargeModalLabe", "aria-hidden" => "true"}
      .modal-dialog.modal-lg
        .modal-content
          .modal-header
            %button{ :class => "close", "data-dismiss" => "modal", "aria-hidden" => "true" } &times;
            %h4.modal-title{ :id => "myModalLabel"} ENTER TERM RESULTS
          .modal-body 
            .row
              .col-md-1
              .col-md-8
                = label_tag(:grade, "SELECT GRADE-SECTION-SUBJECT")      
                %select{"ng-model" => "myGradeSection", "ng-options" => "mapping as mapping.teacher_grade_subject for mapping  in teacher_grade_subject_mappings | orderBy:'id'", "ng-change" => "getTermResults()", :class => "form-control", :href => "#teacher_show"}   
                  %option{style: "display:none", value: ""} select grade - section - subject  
                //{{myGradeSection}} 
            %br
            %br   
            .row
              %table.table.table-bordered.table-striped.table-hover
                %thead
                  %th STUDENT NAME                 
                  %th{"ng-repeat" => "ac in assessment_criteria"}                    
                    {{ac.subject_criteria}} 
                %tbody
                  %tr{"ng-repeat" => "term_result  in term_results"}
                    %td {{term_result.student_name}} 
                    %td{"ng-repeat" => "ac in assessment_criteria"} 
                      %p{"ng-repeat" => "result  in term_results | filter : ({assessment_criteria_id: ac.id} && {student_master_id: term_result.student_master_id})"}
                      
                       
            %br
            %br   
            .row
              %table.table.table-bordered.table-striped.table-hover
                %thead
                  %th STUDENT NAME                 
                  %th{"ng-repeat" => "ac in assessment_criteria"}                    
                    {{ac.subject_criteria}} 
                %tbody
                  %tr{"ng-repeat" => "student in students"}
                    %td {{student.student_name}}  
                    %td{"ng-repeat" => "ac in assessment_criteria", "ng-show" => "true"}                       
                      %p{"ng-repeat" => "result  in term_results | filter : {assessment_criteria_id: ac.id} | filter: {student_master_id: student.id}"}   
                        {{result.grading_name}}                        
                    %td{"ng-repeat" => "ac in assessment_criteria", "ng-show" => "false"}   
                      %select{"ng-model" => "myGrading", "ng-options" => "grading.id as grading.grading_name for grading in gradings", :class => "form-control"}  
                  
            %br
            .row
              .btn.pull-right
                .col-md-2
                  %button{:type => "button", :class=> "btn btn-primary", :ng_click => "saveTermResults()"}=  "SAVE"
            




